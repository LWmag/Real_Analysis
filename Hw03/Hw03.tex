\documentclass{article}

\usepackage{fancyhdr}
\usepackage{extramarks}
\usepackage{amsmath}
\usepackage{amsthm}
\newtheorem{lemma}{Lemma}
\usepackage{amsfonts}
\usepackage{tikz}
\usepackage[plain]{algorithm}
\usepackage{algpseudocode}

\usetikzlibrary{automata,positioning}

%
% Basic Document Settings
%

\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

\linespread{1.1}

\pagestyle{fancy}
\lhead{\hmwkAuthorName}
\chead{\hmwkClass\ (\hmwkClassInstructor\ \hmwkClassTime): \hmwkTitle}
\rhead{\firstxmark}
\lfoot{\lastxmark}
\cfoot{\thepage}

\renewcommand\headrulewidth{0.4pt}
\renewcommand\footrulewidth{0.4pt}

\setlength\parindent{0pt}

%
% Create Problem Sections
%

\newcommand{\enterProblemHeader}[1]{
    \nobreak\extramarks{}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
}

\newcommand{\exitProblemHeader}[1]{
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \stepcounter{#1}
    \nobreak\extramarks{Problem \arabic{#1}}{}\nobreak{}
}

\setcounter{secnumdepth}{0}
\newcounter{partCounter}
\newcounter{homeworkProblemCounter}
\setcounter{homeworkProblemCounter}{1}
\nobreak\extramarks{Problem \arabic{homeworkProblemCounter}}{}\nobreak{}

%
% Homework Problem Environment
%
% This environment takes an optional argument. When given, it will adjust the
% problem counter. This is useful for when the problems given for your
% assignment aren't sequential. See the last 3 problems of this template for an
% example.
%
\newenvironment{homeworkProblem}[1][-1]{
    \ifnum#1>0
        \setcounter{homeworkProblemCounter}{#1}
    \fi
    \section{Problem \arabic{homeworkProblemCounter}}
    \setcounter{partCounter}{1}
    \enterProblemHeader{homeworkProblemCounter}
}{
    \exitProblemHeader{homeworkProblemCounter}
}

%
% Homework Details
%   - Title
%   - Due date
%   - Class
%   - Section/Time
%   - Instructor
%   - Author
%

\newcommand{\hmwkTitle}{Homework\ \#3}
\newcommand{\hmwkDueDate}{Mar 19, 2024}
\newcommand{\hmwkClass}{Real Analysis}
\newcommand{\hmwkClassTime}{Tuesday}
\newcommand{\hmwkClassInstructor}{Professor Yakun Xi}
\newcommand{\hmwkAuthorName}{\textbf{Shuang Hu}}

%
% Title Page
%

\title{
    \vspace{2in}
    \textmd{\textbf{\hmwkClass:\ \hmwkTitle}}\\
    \normalsize\vspace{0.1in}\small{Due\ on\ \hmwkDueDate\ at 10:00am}\\
    \vspace{0.1in}\large{\textit{\hmwkClassInstructor\ \hmwkClassTime}}
    \vspace{3in}
}

\author{\hmwkAuthorName}
\date{}

\renewcommand{\part}[1]{\textbf{\large Part \Alph{partCounter}}\stepcounter{partCounter}\\}

%
% Various Helper Commands
%

% Useful for algorithms
\newcommand{\alg}[1]{\textsc{\bfseries \footnotesize #1}}

% For derivatives
\newcommand{\deriv}[1]{\frac{\mathrm{d}}{\mathrm{d}x} (#1)}

% For partial derivatives
\newcommand{\pderiv}[2]{\frac{\partial}{\partial #1} (#2)}

% Integral dx
\newcommand{\dx}{\mathrm{d}x}

% Alias for the Solution section header
\newcommand{\solution}{\textbf{\large Solution}}
\newcommand{\norm}[1]{\|#1\|}
% Probability commands: Expectation, Variance, Covariance, Bias
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\Bias}{\mathrm{Bias}}
\newcommand{\supp}{\text{supp}}
\newcommand{\Rn}{\mathbb{R}^{n}}
\newcommand{\dif}{\mathrm{d}}
\newcommand{\avg}[1]{\left\langle #1 \right\rangle}
\newcommand{\difFrac}[2]{\frac{\dif #1}{\dif #2}}
\newcommand{\pdfFrac}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\OFL}{\mathrm{OFL}}
\newcommand{\UFL}{\mathrm{UFL}}
\newcommand{\fl}{\mathrm{fl}}
\newcommand{\Eabs}{E_{\mathrm{abs}}}
\newcommand{\Erel}{E_{\mathrm{rel}}}
\newcommand{\DR}{\mathcal{D}_{\widetilde{LN}}^{n}}
\newcommand{\add}[2]{\sum_{#1=1}^{#2}}
\newcommand{\innerprod}[2]{\left<#1,#2\right>}
\newcommand{\Sc}{\mathcal{S}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\E}{\mathcal{E}}
\newcommand{\A}{\mathcal{A}}
\newcommand{\cp}[2]{\cup_{#1=1}^{#2}}
\newcommand{\sm}[2]{\sum_{#1=1}^{#2}}
\newcommand{\M}{\mathcal{M}}
\newcommand\tbbint{{-\mkern -16mu\int}}
\newcommand\tbint{{\mathchar '26\mkern -14mu\int}}
\newcommand\dbbint{{-\mkern -19mu\int}}
\newcommand\dbint{{\mathchar '26\mkern -18mu\int}}
\newcommand\bint{
{\mathchoice{\dbint}{\tbint}{\tbint}{\tbint}}
}
\newcommand\bbint{
{\mathchoice{\dbbint}{\tbbint}{\tbbint}{\tbbint}}
}
\begin{document}
\maketitle
\pagebreak
\begin{homeworkProblem}
    Let $\A$ be the collection of finite unions of sets of the form 
    $(a,b]\cap\mathbb{Q}$ where $-\infty\le a<b\le\infty$.
    \begin{enumerate}
        \item $\A$ is an algebra on $\mathbb{Q}$.
        \item The $\sigma$-algebra generated by $\A$ is 
        $\mathcal{P}(\mathbb{Q})$.
        \item Define $\mu_{0}$ on $\A$ by $\mu_{0}(\emptyset)=0$ 
        and $\mu_{0}(A)=\infty$ for $A\neq\emptyset$. Then $\mu_{0}$ 
        is a premeasure on $\A$, and there is more than one measure 
        on $\mathcal{P}(\mathbb{Q})$ whose restriction to $\A$ 
        is $\mu_{0}$.
    \end{enumerate}
\end{homeworkProblem}
\begin{proof}
    $(1)$
    First, we show $\E:=\{(a,b]\cap\mathbb{Q}:
    -\infty\le a<b\le\infty\}$ forms an elementary family.
    If $a>b$, the notation $(a,b]:=\emptyset$.

    Set $\Sc_{1}:=(a,b]\cap\mathbb{Q}$, 
    $\Sc_2:=(x,y]\cap\mathbb{Q}$, 
    then $\Sc_1\cap\Sc_2=(\max(a,x),\min(b,y)]\cap\mathbb{Q}\in\E$.
    On the other hand, $\Sc_1^{c}=((-\infty,a]\cap\mathbb{Q})
    \cup((b,\infty]\cap\mathbb{Q})$, 
    which is a finite union of elements in $\E$. 
    So $\E$ is an elementary family. 

    Then, by Proposition 1.7, $\A$ is an algebra on $\mathbb{Q}$.\qed

    $(2)$ As $\A\subset\mathcal{P}(\mathbb{Q})$ and 
    $\mathcal{P}(\mathbb{Q})$ be a $\sigma$-algebra, 
    $\M(\A)\subset\mathcal{P}(\mathbb{Q})$. 
    It suffices to show $\mathcal{P}(\mathbb{Q})\subset\M(\A)$.
    
    Choose $\Sc\in\mathcal{P}(\mathbb{Q})$, write 
    $\Sc=\{q_{1},\ldots,q_{n},\ldots\}$. As $\forall q\in\mathbb{Q}$, 
    $(q-\frac{1}{n},q]\cap\mathbb{Q}\in\A$, i.e. 
    $\cap_{n=1}^{\infty}(q-\frac{1}{n},q]\cap\mathbb{Q}=\{q\}\in\M(\A)$, we can see:
    \begin{displaymath}
        \Sc=\cp{i}{\infty}\{q_{i}\}\in\M(\A).
    \end{displaymath}
    So $\mathcal{P}(\mathbb{Q})\subset\M(\A)$. \qed

    $(3)$ By definition, $\mu_{0}(\emptyset)=0$. 
    If $\emptyset\neq A=\cp{i}{\infty}A_i\in\A$ 
    with disjoint sets $A_i$, which implies 
    $\exists j\in\mathbb{N}$ s.t. $A_{j}\neq \emptyset$, then:
    \begin{displaymath}
        \mu_{0}(A)=\infty,\quad\sm{i}{\infty}\mu_{0}(A_{i})\ge\mu_{0}(A_{j})
        =\infty.
    \end{displaymath}
    So $\mu_{0}(\cp{i}{\infty}A_{i})=\sm{i}{\infty}\mu_{0}(A_i)$. 
    It means $\mu_{0}$ is a premeasure on $\A$. 

    Set $\mu_1,\mu_2:
    \mathcal{P}(\mathbb{Q})\rightarrow[0,\infty]$ satisfies: 
    \begin{itemize}
        \item $\mu_1(\emptyset)=\mu_2(\emptyset)=0$.
        \item For $\text{card}(\Sc)=\infty$, 
        $\mu_{1}(\Sc)=\mu_2(\Sc)=\infty$.
        \item For $\text{card}(\Sc)<\infty$, 
        $\mu_{1}(\Sc)=\infty$, $\mu_{2}(\Sc)=\text{card}(\Sc)$.
    \end{itemize}
    It's easy to check that $\mu_{1},\mu_{2}$ are distinct 
    measures on $\mathcal{P}(\mathbb{Q})$. 
    
    On the other hand, $\mathbb{Q}$ is dense in $\mathbb{R}$, 
    which means $\forall a<b$, 
    $\text{card}((a,b]\cap\mathbb{Q})=\infty$.
    So $\forall\Sc\in\A$ with $\Sc\neq\emptyset$, 
    $\mu_{1}(\Sc)=\mu_2(\Sc)=\infty$. 
    i.e. $\mu_1|_{\A}=\mu_{2}|_{\A}=\mu_{0}$.\qedhere
\end{proof}
\begin{homeworkProblem}
    Let $\mu$ be a finite measure on $(X,\M)$, 
    and let $\mu^{*}$ be the outer measure induced by $\mu$. 
    Suppose that $E\subset X$ satisfies $\mu^{*}(E)=\mu^{*}(X)$. 
    \begin{enumerate}
        \item If $A,B\in\M$ and $A\cap E=B\cap E$, 
        then $\mu(A)=\mu(B)$.
        \item Let $\M_{E}=\{A\cap E:A\in\M\}$, 
        and define the function $\nu$ on $\M_{E}$ defined by 
        $\nu(A\cap E)=\mu(A)$. Then $\M_{E}$ is a $\sigma$-algebra 
        on $E$ and $\nu$ is a measure on $\M_{E}$.
    \end{enumerate}
\end{homeworkProblem}
\begin{proof}
    $(1)$ First, we show $\mu(A\cap B^{c})=0$. 
    Assume $\mu(A\cap B^{c})>0$, 
    mark $\Sc:=A\cap B^{c}$. 
    If $\Sc\cap E=\emptyset$, 
    i.e. $E\subset\Sc^{c}$, 
    and $\mu(\Sc^{c})=\mu(X)-\mu(\Sc)<\mu(X)$, 
    it means $\mu^{*}(E)<\mu^{*}(X)$, contradict! 
    So $\Sc\cap E\neq \emptyset$. 

    On the other hand, as $A\cap E=B\cap E$, 
    \begin{displaymath}
        \emptyset=(A\cap E)\cap (B\cap E)^{c}
        =(A\cap E)\cap(B^{c}\cup E^{c})
        \supset A\cap B^{c}\cap E
        =\Sc\cap E,
    \end{displaymath}
    contradict! So $\mu(\Sc)=0$, 
    which means that $\mu(A)=\mu(A\cap B)$.

    In the same way, $\mu(A^{c}\cap B)=0$, i.e. $\mu(B)=\mu(A\cap B)$. 
    So $\mu(A)=\mu(B)$. \qed

    $(2)$ First, we show $(E,\M_{E})$ be a $\sigma$-algebra.

    Choose disjoint sets $\{\Sc_{i}\}\subset\M_{E}$, i.e. 
    $\exists$ disjoint sets $\{A_i\}$ such that $\Sc_i=A_i\cap E$, 
    then 
    $\cp{i}{\infty}\Sc_i=(\cp{i}{\infty}A_i)\cap E$. 
    As $\cp{i}{\infty}A_i\in\M$, 
    $\cp{i}{\infty}\Sc_i\in\M_{E}$.

    On the other hand, for $\Sc\in\M_{E}$, i.e. $\Sc=A\cap E$ 
    for $A\in\M$, it's clear that 
    $\Sc^{c}=A^{c}\cap E$ 
    (complement on $E$). 
    As $A^{c}\in\M$, $\Sc^{c}\in\M_{E}$. 
    So $(E,\M_{E})$ is a $\sigma$-algebra.

    Then, we show $\nu$ is well-defined. 
    If $\exists B\in\mathcal{M}$ s.t. $A\cap E=B\cap E$, 
    then by $(a)$, $\mu(A)=\mu(B)$. 
    So $\nu(A\cap E)=\mu(A)=\mu(B)$, which means $\nu(A\cap E)$ 
    is unrelated to the representation element $A$. 
    It means $\nu$ is well-defined.

    Finally, we show $\nu$ be a measure on $\M_{E}$. 
    For disjoint sets $\{\Sc_{i}\}\subset\M_{E}$, 
    i.e. $\Sc_{i}=A_{i}\cap E$. Unfortunately, 
    $\{A_{i}\}$ may not disjoint.
    
    Mark $B_{i}=\cp{j}{i}A_{j}$, 
    set $\tilde{A}_{1}:=A_{1}$ and 
    $\forall n\in\mathbb{N}$, $\tilde{A}_{n}:=A_{n}\cap B_{n-1}^{c}$, 
    $\{\tilde{A}_{i}\}$ satisfies:
    \begin{itemize}
        \item $\{\tilde{A}_{i}\}$ are disjoint sets in $\M$.
        \item $\tilde{A}_{i}\cap E=A_{i}\cap E$.
        \item $\cp{i}{\infty}A_{i}=\cp{i}{\infty}\tilde{A}_{i}$.
    \end{itemize}
    For the first property, if $m<n$, 
    \begin{displaymath}
        \tilde{A}_{m}\cap\tilde{A}_{n}
        =A_{m}\cap A_{n}\cap B_{m-1}^{c}\cap B_{n-1}^{c}
        \subset A_{m}\cap(\cap_{i=1}^{n-1}A_{i}^{c})
        =\emptyset,
    \end{displaymath}
    for the second property, 
    \begin{displaymath}
        \begin{array}{rl}
        \tilde{A}_{i}\cap E&=A_{i}\cap E\cap B_{i-1}^{c}\\
        &=A_{i}\cap E\cap (\cap_{j=1}^{i-1}A_{j}^{c}\cap E)\\
        &=\mathcal{S}_{i}\cap(\cap_{j=1}^{i-1}(E\setminus \mathcal{S}_{j}))\\
        &=\mathcal{S}_{i}=A_{i}\cap E.
        \end{array}
    \end{displaymath}
    The fourth equality follows from 
    $\forall j\neq i$, $\mathcal{S}_{j}\cap\mathcal{S}_{i}=\emptyset$. 

    For the third property, proof by induction. For $n=1$, $A_{1}=\tilde{A}_{1}$.
    Assume for $n=k$, $\cp{i}{k}A_{i}=\cp{i}{k}\tilde{A}_{i}$, 
    then for $n=k+1$, 
    \begin{displaymath}
        \cp{i}{k+1}\tilde{A}_{i}
        =\tilde{A}_{k+1}\cup\cp{i}{k}\tilde{A}_{i}
        =\tilde{A}_{k+1}\cup B_{k}
        =(A_{k+1}\cap B_{k}^{c})\cup B_{k}
        =\cp{i}{k+1}A_{i}.
    \end{displaymath}
    So $\forall n\in\mathbb{N}$, 
    $\cp{i}{n}A_{i}=\cp{i}{n}\tilde{A}_{i}$. 
    Choose $n\rightarrow\infty$, 
    $\cp{i}{\infty}A_{i}=\cp{i}{\infty}\tilde{A}_{i}$. 

    Then:
    \begin{displaymath}
        \begin{array}{rl}
            \nu(\cp{i}{\infty}\mathcal{S}_{i})&=
            \nu((\cp{i}{\infty}A_{i})\cap E)\\
            &=\nu((\cp{i}{\infty}\tilde{A}_{i})\cap E)\\
            &=\mu(\cp{i}{\infty}\tilde{A}_{i})\\
            &=\sm{i}{\infty}\mu(\tilde{A}_{i})\\
            &=\sm{i}{\infty}\mu(A_{i})\\
            &=\sm{i}{\infty}\nu(A_{i}\cap E)
            =\sm{i}{\infty}\nu(\Sc_{i}).
        \end{array}
    \end{displaymath}
    The second equality follows from property 3, 
    the forth from property 1 and 
    the fifth from property 2 and $(1)$. 
    It means $\nu$ is additivity, 
    i.e. $\nu$ is a measure on $\M_{E}$.
\end{proof}
\begin{homeworkProblem}
    Complete the proof of Theorem 1.19.
\end{homeworkProblem}
\begin{proof}
    Consider the case $\mu(E)=\infty$. 
    Set $E_{n}:=[-n,n]\cap E$, it's clear that 
    $E=\cp{n}{\infty}E_{n}$ 
    and $\mu(E_{n})<\infty$.

    $(a)\Rightarrow(c)$: For each $E_{n}$, 
    $\exists$ $F_{\sigma}$-sets $K_{n}$ satisfies:
    \begin{itemize}
        \item $K_{n}\subset E_{n}$,
        \item $E_{n}=K_{n}\cup Q_{n}$ with $\mu(Q_{n})=0$. 
    \end{itemize}
    Then:
    \begin{displaymath}
        E=(\cp{n}{\infty}K_{n})\cup
        (\cp{n}{\infty}Q_{n}).
    \end{displaymath}
    By the definition of $F_{\sigma}$ set, 
    $K:=\cp{n}{\infty}K_{n}$ is a $F_{\sigma}$ set. 
    And $\mu(\cp{n}{\infty}Q_{n})=0$.
    It means $\exists$ $F_{\sigma}$-set $K$ and $\mu(\Sc)=0$ s.t. 
    $E=K\cup\Sc$.

    $(a)\Rightarrow(b)$: Because of $E\in\mathcal{M}_{\mu}$, 
    $E^{c}\in\mathcal{M}_{\mu}$. 
    By $(c)$, $\exists$ a $F_{\sigma}$ set $K$ satisfies:
    \begin{itemize}
        \item $K\subset E^{c}$,
        \item $E^{c}=K\cup \mathcal{S}$ with $\mu(\mathcal{S})=0$.
    \end{itemize}
    Then $E=K^{c}\setminus \mathcal{S}$. 
    As $K$ be a $F_{\sigma}$-set, 
    $\exists$ closed sets $\mathcal{C}_{i}$ such that 
    $K=\cp{i}{\infty}\mathcal{C}_{i}$. 
    So $K^{c}=\cap_{i=1}^{\infty}\mathcal{C}_{i}^{c}$, i.e. 
    $K^{c}$ is a $G_{\delta}$ set. 
    It means that $(b)$ holds.
\end{proof}
\begin{homeworkProblem}
    Prove Proposition 1.20.
\end{homeworkProblem}
\begin{proof}
    As $E\in\M_{\mu}$, there exists 
    a sequence of open intervals $(a_{j},b_{j})$ s.t. 
    \begin{itemize}
        \item $\cp{i}{\infty}(a_i,b_i)\supset E$.
        \item $\sm{i}{\infty}\mu((a_i,b_i))<\mu(E)+\frac{\epsilon}{2}$.
    \end{itemize}
    By Theorem 1.18, $\exists$ a compact set $K\subset E$ 
    s.t. $\mu(K)\ge\mu(E)-\frac{\epsilon}{2}$. 
    As $K$ is compact, there exists a finite covering 
    $\cp{i}{N}(a_{i},b_i)\supset K$.

    Just set $A=\cp{i}{N}(a_i,b_i)$, 
    i.e. $A$ is a finite union of open intervals. 
    On one hand: 
    \begin{displaymath}
        \mu(A\setminus E)\le\mu((\cp{i}{\infty}(a_i,b_i))\setminus E)
        \le\frac{\epsilon}{2},
    \end{displaymath}
    on the other hand:
    \begin{displaymath}
        \mu(E\setminus A)\le\mu(E\setminus K)<\frac{\epsilon}{2}.
    \end{displaymath}
    So, $\mu(A\triangle E)<\epsilon$.
\end{proof}
\begin{homeworkProblem}
    Let $F$ be increasing and right continuous, 
    and let $\mu_{F}$ be the associated measure. 
    Then $\mu_{F}(\{a\})=F(a)-F(a-)$, 
    $\mu_{F}([a,b))=F(b-)-F(a-)$, 
    $\mu_{F}([a,b])=F(b)-F(a-)$, 
    and $\mu_{F}((a,b))=F(b-)-F(a)$.
\end{homeworkProblem}
\begin{proof}
    First we show that $\mu_{F}(\{a\})=F(a)-F(a-)$.
    By the definition of $\mu_{F}$, $\forall n\in\mathbb{N}$, 
    $$\mu_{F}\left(\left(a-\frac{1}{n},a\right]\right)
    =F(a)-F(a-\frac{1}{n}).$$
    As $F:\mathbb{R}\rightarrow\mathbb{R}$, 
    $F(a)-F(a-1)<\infty$, 
    i.e. $\mu_{F}((a-1,a])<\infty$, 
    And $\forall n>m$, $(a-\frac{1}{n},a]\subset(a-\frac{1}{m},a]$.

    By the continuity from below, 
    \begin{displaymath}
        \mu_{F}(\{a\})=
        \mu_{F}\left(\cap_{n=1}^{\infty}
        \left(a-\frac{1}{n},a\right]\right)
        =\lim_{n\rightarrow\infty}
        \mu_{F}\left(\left(a-\frac{1}{n},a\right]\right)
        =F(a)-\lim_{n\rightarrow\infty}F(a-\frac{1}{n})
        =F(a)-F(a-).
    \end{displaymath}
    By the additivity of measure $\mu_{F}$, 
    \begin{displaymath}
        \begin{array}{rl}
        &\mu_{F}([a,b))\\
        =&\mu_{F}((a,b]\cup\{a\}\setminus\{b\})\\
        =&\mu_{F}((a,b])+\mu_{F}(\{a\})-\mu_{F}(\{b\})\\
        =&F(b)-F(a)+F(a)-F(a-)-F(b)+F(b-)=F(b-)-F(a-).
        \end{array}
    \end{displaymath} 
    \begin{displaymath}
        \mu_{F}([a,b])=\mu_{F}(\{a\})+\mu_{F}(a,b]=F(b)-F(a)+F(a)-F(a-)
        =F(b)-F(a-).
    \end{displaymath}
    \begin{displaymath}
        \mu_{F}((a,b))=\mu_{F}((a,b]\setminus\{b\})
        =\mu_{F}((a,b])-\mu_{F}(\{b\})
        =F(b)-F(a)-F(b)+F(b-)=F(b-)-F(a).
    \end{displaymath}
\end{proof}
\end{document}